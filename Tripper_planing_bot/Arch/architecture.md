---
title: Архитектура
---

# Диаграммы

## Компонентная диаграмма

[картинка схемы Server]

### Server

* Основной компонент.
* Функции:
  * Обрабатывает все веб запросы и запросы от телеграмм бота.
  * Обеспечение взаимодействия между всеми компонентами.

### Telegram Bot

* Компонент: интерфейс для взаимодействия с пользователем через
  Telegram.
* Функции:
  * Передача команд и запросов от пользователя на сервер.
  * Отображает ответы сервера в чате бота.

### User

* Роль: Telegram польлзователь.
* Функции:
  * Инициализирует запросы через Telegram бота, такие как:
    запланировать поездку, добавить заметку к путевой точке и другие.
  * Делится геолокацией.
  * Получает сообщения от Telegram бота.
  * Имеет доступ к эндпоинту /healthcheck без авторизации.

### Admin

* Роль: администратор системы.
* Функции:
  * Имеет доступ к эндпоинту /users с авторизацией по API ключу.
  * Имеет доступ к эндпоинту /healthcheck без авторизации.

### MongoDB

* База данных: документоориентированная база данных.
* Функции:
  * Хранит информацию о администраторах.
  * Хранит информацию о пользователях и их поездках.

[картинка схемы MongoDB]

### AdminModule

* Компонент: модуль администрации системы.
* Функции:
  * Реализует эндпоинт /users, отображающий данные о всех
    пользователях.
  * Доступен администраторам с авторизацией.

[картинка схемы AdminModule]

### HealthcheckModule

* Компонент: модуль проверки состояния сервера.
* Функции:
  * Реализует эндпоинт /healthcheck для проверки работоспособности
    сервера и получения списка авторов.
  * Доступен без авторизации.

[картинка схемы HealthCheckModule]

### MessageParser

* Компонент: обработка сообщений от Telegram бота.
* Функции:
  * Обрабатывает сообщения от Telegram бота.
  * Направляет команды в соответствующий модуль.

### PlannedTripsModule

* Компонент: модуль планирования поездок.
* Функции:
  * Обрабатывает команду /plantrip, запланирование новой поездки.
  * Обрабатывает команду /showplanned, получение списка
    запланированных поездок.
  * Обрабатывает команду /deleteplanned, удаление запланированной
    поездки.

[картинка схемы PlannedTripsModule]

### TripHelperModule

* Компонент: модуль помощник c поездкой.
* Функции:
  * Обрабатывает команду /addnote, добавление заметки к путевой точке
    одной из поездкой.
  * Обрабатывает команду /markpoint, мануальная отметка путевой точки
    текущей поездки как посещенной.

[картинка схемы TripHelperModule]

### TripHistoryModule

* Компонент: модуль истории поездок.
* Функции:
  * Обрабатывает команду /triphistory, предоставляя список всех
    поездок с возможностью получения подробностей об отдельной поездке
    или оценки отдельной поездки.

[картинка схемы TripHistoryModule]

### TripHelperWorker

* Компонент: работник помощника с поездкой.
* Функции:
  * Фоново следит за состоянием поездок пользователей.
  * Уведомляет пользователей об их ближайшей поездке неделю до её
    начала и один день до её начала.
  * Автоматически делает запланированную поездку текущей при
    наступлений даты её начала.
  * Автоматически перемещает текущую поездку в историю поездок при
    истечению даты её конца.
  * Заращивает у пользователя геолокацию в ходе поездки.
  * Автоматически отмечает путевую точку посещенной, если геолокация
    пользователя входит в определённый радиус вокруг неё.

# Описание развертывания приложения

## Сборка приложения

## Описание деплоя

## Описание запуска
